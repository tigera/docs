---
title: Service Graph tutorial
description: Learn the basics of using Service Graph.
canonical_url: '/get-started/tutorials/service-graph'
---

>**Note**: This tutorial references the labs cluster setup that is part of the {{site.prodname}} Trial environment.
{: .alert .alert-info}

### What you will learn

- The basics of Service Graph
- To visualize workload communication in the labs cluster using Service Graph
- The features of Service Graph that help you manage scale of clusters with a large number of namespaces

### The "what" and "why" of Service Graph

One of the things we consistently hear from DevOps engineers, SREs, and platform operators is that they struggle with getting basic visibility within their Kubernetes cluster. As more apps and microservices are deployed, and workloads are changing on a continuous basis, it becomes hard to understand how everything is working together in such a complex multi-tenant environment. Service Graph aims to provide a "weather map" view of everything in a cluster, helping new team members ramp up quickly on how everything is communicating with each other, and provide an easy way to engage the right stakeholders when issues come up. Service Graph delivers a point-to-point, topographical view of how namespaces, services, and deployments are communicating with each other.

### Exploring Service Graph with the labs cluster

Select the tigera-labs cluster in the upper right corner of the Manager UI, then select Service Graph in the left navigation menu.

The default view when you visit Service Graph provides a representation of how Namespaces within the cluster are communicating with each other. Each namespace is represented with the standard Kubernetes icon for Namespaces. There are some demo Namespaces - *hipstershop*, *storefront*, and *acme* - and other Tigera Namespaces that are used for {{site.prodname}}. Egress traffic leaving the cluster is represented with globe icons. Under the hood, each of these globe icons are a custom resource called a **NetworkSet**.

#### NetworkSets

By default, {{site.prodname}} provides two system-defined NetworkSets - one for public IPs called **public network** and another for private IPs called **private network**. You can also define your own NetworkSets with a list of IPs or CIDRs and they will appear on this graph, enabling you to get more granular visibility into the egress traffic that is specific to your environment. The **public-ip-range** is an example of such a NetworkSet that has been already created in the labs cluster. 

For more examples of using network sets, see [Secure egress access from workloads to destinations outside the cluster]({{site.baseurl}}/workload-access/applications/egress-controls), and [Understanding network sets]({{site.baseurl}}/get-started/tutorials/networksets).

#### Selecting graph edges and graph nodes

To get additional information on a graph node or graph edge, you can select it, and the **Details tab** on the right and logs panel below will automatically update and/or filter based on this selection depending on whether or not there is data available.

Try this in the labs cluster by clicking on the edge between the *hipstershop* Namespace and the *public network* NetworkSet. The flow logs should be automatically filtered below in the Flows tab, and you can expand any of the rows in that tab to view some of the detailed metadata that {{site.prodname}} provides around workload communication.

#### Double-clicking on a namespace

You can also double click on a Namespace to see some of the services and deployments that exist within a Namespace and how they are communicating externally and with the rest of the cluster. Try this for *hipstershop* and *storefront*. All of the resources in purple will be part of the selected Namespace (which is also listed in the breadcrumb in the upper left), and anything external to the Namespace will be represented in blue. These views are useful when you need to understand the next level of detail when troubleshooting a specific application or microservice running in your cluster.

To return the default view, click on the **Namespaces** in the upper left breadcrumb.

#### Right-click actions to manage scale

Right-clicking a Namespace, service, or deployment brings up another set of actions that are designed to help you manage the scale of your Kubernetes cluster. Although the labs cluster has only a dozen or so Namespaces, it is likely that your Kubernetes clusters could have over one hundred Namespaces.

Right-click *hipstershop* and choose **Hide unrelated**. Hide unrelated allows you to quickly filter and trim the Service Graph to show just the selected entity and anything it is communicating with. This is helpful in troubleshooting issues for a specific Namespace or application, or for application teams to quickly understand their upstream and downstream dependencies.

To reset the view after this action, choose **Reset view & filters** under the Reset icon in the upper right corner of the canvas.

### Using layers and views

One of the other unique features of Service Graph is the concept of **layers**, which allows you to create meaningful groupings of resources so you can easily hide and show them on the graph. This is another tool to help you manage the overall scale of visualizing workloads within your cluster.  You could create layers for different types of platform infrastructure you might have in your cluster - networking, storage, logging. 

Click into the default Namespaces view of Service Graph and select the **Layers** tab in the panel on the right. The labs cluster already has a Layer called **Tigera components** that contains a number of Namespaces related to {{site.prodname}}. You can expand this Layer and see the Namespaces that are included.

Select **Hide layer** from the ellipsis/spillover menu. This hides the entire layer on the graph, making it easy to hide/show a group of related Namespaces. You can reset the view by selecting **Reset view & filters** under the Reset icon in the upper right corner of the canvas.

Select the **Views** tab in the panel on the right. Views allow you to save the state of the graph on the canvas so you can easily revisit them. 

Try double-clicking into *hipstershop*, selecting the *productcatalogservice*, right-clicking and selecting hide unrelated. Save this view as "Product Catalog‚Äù, reset the views and filters by clicking **Namespaces** in the upper left, and use this view to quickly revisit this version of the graph.

### Logs and details panel

As you are working with Service Graph, the panels below and to the right of the main canvas can display additional information for selections you make on the graph. The exact information you see can vary depending on the following:

- Whether you select a graph node or edge
- Type of graph node selected (Namespace, NetworkSet, Service, etc.)
- Whether or not you have deployed Envoy for Layer 7 visibility

#### Details panel

Find the *hipstershop* Namespace and doubleclick into the Namespace to see a detailed view of service-to-service communication.

Select the **checkoutservice** on the graph. You can easily see the Inbound and Outbound connections for this service in the Details panel. Expanding any of those connections shows you some of the volumetric data for each of those flows.

Below you can also see some of the DNS states, ports and protocols in use for the service, top URLs and latency information.

Clicking on the **Process Info** tab will also show you some of the specific processes associated with the traffic flows for the checoutservice. This can be helpful in troubleshooting scenarios where identifying the specific binaries that are involved in service communication may be required to track down a bug.

#### Logs panel

Looking below at the bottom panel you should see several tabs: Flows, DNS, HTTP, Alerts, and Capture Jobs.

With the checkoutservice still selected, you should see that filters are automatically applied on the Flows tab to show you detailed logs for Layer 4 traffic. Similar filters are automatically applied to the DNS and HTTP flows. Note that HTTP flows require the deployment of Envoy to see Layer 7 traffic in any cluster connected to {{site.prodname}}.

The Alerts tab will show alerts if they are generated, and Capture Jobs will show any packet capture jobs that have been defined for this Namespace.
