---
description: Command to get diagnostics from a Calico cluster.
---

# calicoctl cluster diags

This section describes the `calicoctl cluster diags` command.

Read the [calicoctl Overview](../overview.mdx)
for a full list of calicoctl commands.

Note, this command can be run from any location that has access to the cluster
(e.g. anywhere with kubeconfig).

## Displaying the help text for 'calicoctl cluster diags' command

Run `calicoctl cluster diags --help` to display the following help menu for the
command.

```
Usage:
  calicoctl cluster diags [--since=<SINCE>] [--config=<CONFIG>]

Options:
  -h --help               Show this screen.
     --since=<SINCE>      Only collect logs newer than provided relative duration,
                          in seconds (s), minutes (m) or hours (h)
  -c --config=<CONFIG>    Path to the file containing connection configuration in
                          YAML or JSON format.
                          [default: /etc/calico/calicoctl.cfg]

Description:
  The cluster diags command collects a snapshot of diagnostic info and logs related
  to Calico for the given cluster.
```

### Examples

```bash
calicoctl cluster diags
calicoctl cluster diags --since=1h
```

An example response follows.

```
==== Begin collecting diagnostics. ====
Collecting basic cluster state ...
Collect all namespaces
Collect all in calico-system
Collect all in tigera-operator
Collecting host node details ...
Collect nodes
Collect nodes yaml
Collect installations
Collect apiservers
Collect compliances
Collect intrusiondetections
Collect managers
Collect logcollectors
Collect logstorages
Collect managementclusterconnections
Collecting tigera-operator logs ...
Collect ipamblocks yaml
Collecting TigeraStatus details ...
Collect tigerastatus
Collect tigerastatus yaml
Collecting IPAM diagnostics ...
Collect ipamblocks yaml
Collect blockaffinities yaml
Collect ipamhandles yaml
Collecting calico/typha logs ...
Collect logs for typha pod calico-typha-64748d876f-4js2v
Collect logs for typha pod calico-typha-64748d876f-pvcmc
Collect logs for typha pod calico-typha-64748d876f-rlrmb
Collect logs for typha pod calico-typha-64748d876f-zjh92
Collecting per-node logs and network information ...
Collecting logs for node: calico-node-6gqdx
Collect logs for node calico-node-6gqdx
Collect iptables for node calico-node-6gqdx
Collect ip routes for node calico-node-6gqdx
Collecting logs for node: calico-node-89v97
Collect logs for node calico-node-89v97
Collect iptables for node calico-node-89v97
Collect ip routes for node calico-node-89v97
Collecting logs for node: calico-node-8xg2b
Collect logs for node calico-node-8xg2b
Collect iptables for node calico-node-8xg2b
Collect ip routes for node calico-node-8xg2b
Collecting logs for node: calico-node-wr56k
Collect logs for node calico-node-wr56k
Collect iptables for node calico-node-wr56k
Collect ip routes for node calico-node-wr56k
Collecting logs for node: calico-node-xn5rl
Collect logs for node calico-node-xn5rl
Collect iptables for node calico-node-xn5rl
Collect ip routes for node calico-node-xn5rl

==== Producing a diagnostics bundle. ====
Diagnostic bundle available at ./calico-diagnostics.tar.gz
```

### Options

```
  --since=<SINCE>      Only collect logs newer than provided relative duration,
                       in seconds (s), minutes (m) or hours (h)
  -c --config=<CONFIG> Path to the file containing connection configuration in
                       YAML or JSON format.
                       [default: /etc/calico/calicoctl.cfg]
```
