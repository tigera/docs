import variables from '@site/calico-enterprise_versioned_docs/version-3.17/variables';

16 June 2023

### What's new {#whats-new-3.17.0}

#### New policy recommendations engine for namespace isolation
{variables.prodname} has added a new policy recommendations engine that automatically generates staged policies for namespace isolation within your cluster. [Policy recommendations](../network-policy/recommendations/policy-recommendations).

#### Destination-based routing for egress gateways
{variables.prodname} introduces a new mode for egress gateways that can leverage destination-based routing. Destination-based routing for egress gateways allows operators associated with a destination that is external to a Kubernetes cluster (for example, IP address or CIDR), to a specific egress gateway deployment. [Egress gateways](../networking/egress/egress-gateway-on-prem).

#### Support for DNS rules in clusters using NodeLocal DNSCache
{variables.prodname} has added support for DNS rules in clusters using NodeLocal DNSCache. Also related, there is new documentation on using Calico policy to secure DNS traffic within the cluster with NodeLocal DNSCache enabled. [Use NodeLocal DNSCache in your cluster](../networking/configuring/node-local-dns-cache).

#### Improved UI for configuring Workload-based Web Application Firewall (WAF)
{variables.prodname} includes updates to the UI that allows you to select which services are enabled for the Workload-based Web Application Firewall. [Web application firewall](../threat/web-application-firewall).

#### Wireguard support for AKS and EKS with Calico CNI
{variables.prodname} now offers official support for Wireguard when using Microsoft AKS or Amazon EKS with Calico CNI. This mode of deployment offers performance benefits and a more efficient routing table compared to using cloud provider CNIs.  [Encrypt data in transit](../compliance/encrypt-cluster-pod-traffic).

#### Helm support for BYO Prometheus Operator
{variables.prodname} now supports an existing Prometheus Operator when installing with Helm. You can pass the following false flags during install. For example:

```bash
  helm install calico-enterprise tigera-operator-vx.y.z-0.tgz ... \
    --set tags.tigera-prometheus-operator=false \
    --set tigera-prometheus-operator.enabled=false
```
Or customize the Helm chart using [existing installation steps](../getting-started/install-on-clusters/kubernetes/helm).

### Known issues {#known-issues-3.17.0}

* Upgrading to {variables.prodname} 3.17.0 on Rancher/RKE from {variables.prodname} 3.13.0 currently requires manually terminating the calico-node container for an upgrade to proceed.
* Multi-cluster management of managed clusters with version < v3.17.0 is currently not working.
