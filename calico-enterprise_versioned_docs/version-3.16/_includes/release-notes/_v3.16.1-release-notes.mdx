5 April 2023

### What's new in 3.16.1

#### Application layer policy with Envoy

{{prodname}} now includes support for application layer policy with Envoy, enabling platform operators to define authorization rules in {{prodname}} policies for protocols such as HTTP and gRPC. For more information, see [Application layer policies](../network-policy/application-layer-policies/).

#### Policies for SELinux

{{prodname}} adds support for clusters that use SELinux as an additional layer of security for node operating systems. RPM packages are available to install on each node with policies that authorize the access required by {{prodname}} components. For more information, see [System requirements](../getting-started/install-on-clusters/requirements).

### 3.16.0

#### Egress gateways for AKS and Azure

{{prodname}} adds egress gateway support for Microsoft Azure and AKS. Egress gateways allow you to identify the namespaces associated with egress traffic outside of your cluster. [Egress gateways for AKS and Azure](../networking/egress/egress-gateway-azure).

#### Operator-managed deployments of egress gateways

{{prodname}} supports operator-managed deployments of egress gateways. This reduces operational overhead and eliminates additional steps required during upgrades. For more information, see [Egress gateways](../networking/egress/).

#### UI for workload-based Web Application Firewall (WAF)

{{prodname}} includes a new UI to enable and configure a workload-based Web Application Firewall. For more information, see [Workload-based web application firewall](../../threat/web-application-firewall.mdx#enable-waf).

#### Service Graph performance optimizations

{{prodname}} added several optimizations to improve the performance of Service Graph for clusters with larger numbers of namespaces.

#### Improved installation steps for Rancher RKE2

{{prodname}} improved the installation steps for Rancher RKE2 to accommodate options available in the most recent versions of that platform. For more information, see [Rancher Manager](../../getting-started/install-on-clusters/rancher-ui.mdx).

#### Improvements to Envoy to accommodate advanced ingress controllers

{{prodname}} improves its Envoy deployment so you can use this feature in clusters with ingress controllers that perform advanced load balancing. For more information, see [Workload-based web application firewall](../../threat/web-application-firewall.mdx).

#### Support for multiple external networks

{{prodname}} includes networking options that allows pods from different namespaces to egress onto different external networks (Virtual Routing Functions or VRFs) that may have overlapping IPs with each other. This also enables administrators to configure which service IPs are advertised for a network by the service IP advertisement feature. For more information, see [Configure egress traffic to multiple external networks](../../networking/egress/external-network.mdx).

#### Improved {{prodname}} component security

{{prodname}} components were updated with more restrictive access for pods and containers using the Kubernetes security context:
- Non-root context whenever possible
- Root context and privilege escalation are used only when necessary
- Added `drop ALL capabilities` for pod security
- Enabled `RuntimeDefault` as the default seccomp profile for all workloads

### Known issues

- The ClusterInformations resource is showing the wrong versions for `calicoVersion` and `cnxVersion`. This will be addressed the next patch.
- BPF dataplane on EKS with Kubernetes 1.24, and AKS with Kubenetes 1.25 is not supported at this time. This will be addressed in the next patch.
- Upgrading to {{prodname}} 3.16.0 on Rancher/RKE from {{prodname}} 3.13.0 currently requires manually terminating the calico-node container for an upgrade to proceed.
