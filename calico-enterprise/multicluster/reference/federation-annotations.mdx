---
description: Reference for federation annotations and labels used with federated services.
---

# Federation annotations

Reference for the annotations and labels used by $[prodname] federated services.

## Annotations

| Annotation | Description |
|---|---|
| `federation.tigera.io/serviceSelector` | Required field that specifies the services used in the federated service. Format is a standard $[prodname] selector (i.e. the same as $[prodname] policy resources) and selects services based on their labels. The selector annotation selects services, not pods.<br /><br />Only services in the same namespace as the federated service are included. This implies namespace names across clusters are linked (this is a basic premise of federated endpoint identity).<br /><br />If the value is incorrectly specified, the service is not federated and endpoint data is removed from the service. View the warning logs in the controller for any issues processing this value. |

### Syntax and rules

- Services that you specify in the federated service must be in the same namespace or they are ignored. A basic assumption of federated endpoint identity is that namespace names are linked across clusters.
- If you specify a `spec.Selector` in a federated service, the service is not federated.
- You cannot federate another federated service. If a service has a federated services annotation, it is not included as a backing service of another federated service.
- The target port number in the federated service ports is not used.

### Example

```yaml
apiVersion: v1
kind: Service
metadata:
  name: my-app-federated
  namespace: default
  annotations:
    federation.tigera.io/serviceSelector: run == "my-app"
spec:
  ports:
    - name: my-app-ui
      port: 8080
      protocol: TCP
  type: ClusterIP
```

## Labels

| Label | Description |
|---|---|
| `federation.tigera.io/remoteClusterName` | Label added to all remote services that correspond to the Remote Cluster Configuration name for the remote cluster. Use this label to restrict the clusters selected by the services. **Note**: The label is not added for services in the local cluster. |

### Match services using a label

You can match services using the `federation.tigera.io/remoteClusterName` label. The label is implicitly added to each service, but it does not appear in `kubectl` when viewing the service.

## Endpoints behavior

- Do not manually create or manage endpoints resources; let the Tigera controller do all of the work. User updates to endpoint resources are ignored.
- Endpoints are selected only when the service port name and protocol in the federated service matches the port name and protocol in the backing service.
- Endpoint data configured in the federated service is slightly modified from the original data of the backing service. For backing services on remote clusters, the `targetRef.name` field in the federated service adds the `<original name>`. For example, `<Remote Cluster Configuration name>/<original name>`.
