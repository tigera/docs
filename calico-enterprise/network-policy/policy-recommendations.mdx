---
description: Enable continuous policy recommendations to secure unprotected namespaces or workloads.
---

# Get started with policy recommendations

## Big picture

Enable continuous policy recommendations.

## Value

After you install {{prodname}}, the recommended zero-trust security stance is to deny traffic flows to protect the cluster. Although this is a good thing, allowing traffic requires writing tiered network policy. Writing policy for tiers that follows best practices can be an obstacle to quickly getting clusters up to observe allowed traffic. 

Developers with no experience can get {{prodname}} policy recommendations that allow traffic, but still secure workloads to/from the cluster’s namespaces. In a safe staging environment, developers can immediately get visibility into the impact of network traffic flows. 

## Before you begin

**Required**

To enable/disable policy recommendation, you must have the **tigera-admin** role or permissions to the **Policy Recommendations** resource. 

**Recommended**
Basic knowledge of policies and tiers:
- [Network policy tutorial](../network-policy/policy-tiers/policy-tutorial-ui)
- [Get started with tiered network policy](../network-policy/policy-tiers/tiered-policy)

**Limitations**

In this release, managing policy recommendations is available only in Manager UI. `kubectl` commands are available to update Policy Recommendations resource parameters.

## How to

- [Enable policy recommendations](#enable-policy-recommendations)
- [Activate policy recommendations](#activate-policy-recommendations) 
- [Manage policy recommendations](#manage-policy-recommendations)
- [Troubleshoot policy recommendations](#troubleshoot-policy-recommendations)
- [Change policy recommendations parameters](#change-policy-recommendations-parameters)
- [Disable policy recommendations](#disable-policy-recommendations)

### Enable policy recommendations

1. In the left navbar in Manager UI, click **Policies**, **Recommendations**.
1. On the opt-in page, click **Enable Policy Recommendations**.

   ![Enable policy recommendations](/img/calico-enterprise/enable-policy-recommendations.png)

The **Policy Recommendations** board is automatically displayed. 

![Policy recommendations board](/img/calico-enterprise/policy-recommendations-board.png)

**Notes**:
- A policy recommendation is generated for every namespace in your cluster (unless namespaces are filtered out using the PolicyRecommendationScope resource)
- Traffic originating from the policy recommendation namespace is used to generate egress rules, and traffic destined for the namespace is used to define ingress rules
- Flow log patterns and processes are continuously monitored for policy recommendations. As the cluster changes (new namespaces are created or new components are added), you can get a new policy recommendation. 
- Policy recommendations are automatically converted to **Staged network policies** so you can safely observe the traffic before enforcing them
- If you do not want a policy recommendation to be processed or updated with further recommendations, click the **Action** menu, **Dismiss policy**. 

### Activate policy recommendations

Policy recommendations are not active until you move them to the **Policies Board**. 

From the Policy Recommendation board, select a policy recommendation (or bulk select) and select, **Add to policy board**.  

In the left navbar, click **Policies**, **Default**.

![Policies board](/img/calico-enterprise/policy-recommendations-tier.png)

Policy recommendations are added to the **namespace-segmentation** tier. Note the following:

- Staged network policy recommendations work like any other staged network policies; they are differentiated from regular staged policies by the `recommendation` suffix
- You can move policy recommendation staged policies to other tiers
- The `namespace-segmentation` tier name is fixed and cannot be changed

You are now ready to observe the allowed traffic of your policy in Service Graph to see if the policy meets your needs. A best practice is to assess the impact of a policy recommendation before enforcing it. See [Stage, preview impacts, and enforce policy](staged-network-policies.mdx) for help. 

:::note 

{{prodname}} has an on-the-fly version of policy recommendations called, **Recommend a policy** (**Policies Board**, **Edit**). Although both generate time-stamped policy recommendations, they are different features. To create an on-the-fly policy recommendation, see Recommend a policy](../policy-impact-preview). 

:::

### Manage policy recommendations

As new namespace and components are added to a cluster, your policy recommendation won’t allow traffic to them. If a policy recommendation has not been enforced, you’ll need to update it to allow traffic. 

To get a new policy recommendation for an existing: 

- **Staged policy recommendation**

   1. On the **Policies Recommendations** board, click the **Active tab**, which lists the active staged network policies. 
   1. Select the Actions drop-down associated with the policy in question, and click **Dismiss policy**. 
   1. Click the **Dismissed tab**, select the Actions drop-down, and Reactivate the policy.

- **Enforced policy recommendation**

   Delete or rename the policy so a new staged network policy is recreated on the Policy Recommendations board. 

### Troubleshoot policy recommendations

To view error logs in Kibana, go to **Logs**, and access the `tigera-policy-recommendation` namespace.

**Problem**: I’m not seeing policy recommendations on the Policy Recommendations board.
**Solution/workaround**: Policy recommendations are based on historical flow logs that match a request, and are generated only for flows that are denying traffic. As such, there are times when policy recommendations will not be generated:

- Not enough traffic history 

   If you recently installed {{prodname}}, you may not have enough traffic history. Workloads must run for some time (ballpark is 5 days) to get “typical network traffic” for applications.

- Denied traffic flows are covered by existing policy

   Even if your cluster has been running for a long time with traffic flows, the flows may already be covered by existing policies. 

To verify that you have traffic flows, follow these steps:

1. Go to **Service Graph**, **Default**.
1. Filter flow logs for your namespace.
1. In the Actions menu, you should see **Denied** flows.

If you do not have denied traffic, but still want to test policy recommendations, you can create sample pods, namespaces, and denied traffic. For help, see [Create denied traffic flows to get policy recommendations](../network-policy/denied-traffic-flows). 

### Change policy recommendations parameters

You can change policy recommendation parameters using the [Policy recommendations resource](../reference/resources/policyrecommendations). For example, you may want to change the interval for flow logs to be processed, or the time for a policy to keep processing flows for until it’s considered stable. You can also filter out namespaces. 

### Disable policy recommendations 

To disable policy recommendations, set the **RecStatus** parameter to `Disabled` in the [Policy recommendations resource](../reference/resources/policyrecommendations) resource.

Note that unactivated policy recommendations in the Policies Recommendations board are no longer updated. Existing activated and enforced staged network and policies are not affected by disabling policy recommendations. 
   
## Above and beyond

[Policy best practices](../network-policy/policy-best-practices)