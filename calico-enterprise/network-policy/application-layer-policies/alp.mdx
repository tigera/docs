---
description: Enforce application layer policies in your cluster to limit access controls based on L7 attributes.
---

# Enable and enforce application layer policies

Application layer policies let you limit access controls based on L7 attributes. 

## Before you begin

### Unsupported
{{prodname}} implements application layer policy using Envoy as a DaemonSet. This means you cannot use application layer policy alongside a service mesh like Istio.

### Limitations
- Application layer policy supports restricting only ingress traffic
- Support for L7 attributes are limited to HTTP method and URL path 
- Support for protocols is limited to TCP-based protocols (for example, HTTP, HTTPS, or gRPC)
- You can control application layer policies only at the cluster level (not per namespace) 

## How to
- [Enable application layer policies](#enable-application-layer-policies)
- [Enforce application layer policies for ingress traffic](#enforce-application-layer-policies-for-ingress-traffic)
- [View policies in Manager UI](TBD)

## Enable application layer policies (ALP)
In the ApplicationLayer custom resource, set the `applicationLayerPolicy` field to Enabled.

```
kubectl apply -f - <<EOF                                                                                           
apiVersion: operator.tigera.io/v1
kind: ApplicationLayer
metadata:
  name: tigera-secure 
spec:
  applicationLayerPolicy: Enabled
EOF
```
Use the same field to disable the application layer policy.

## Enforce application layer policies

You can restrict ingress traffic using HTTP match criteria using Network policy or Global network policy. 
For a list of all HTTP match parameters, see [Network policy](../reference/resources/networkpolicy.mdx) and [Global network policy](reference/resources/globalnetworkpolicy.mdx).

In the following example, the trading app is allowed ingress traffic only for HTTP GET requests that match the exact path /projects/calico, or that begins with the prefix, /users.

```
apiVersion: projectcalico.org/v3
kind: GlobalNetworkPolicy
metadata:
  name: customer
spec:
  selector: app == 'tradingapp'
  ingress:
   - action: Allow
     http:
       methods: ["GET"]
       paths:
         - exact: "/projects/calico"
         - prefix: "/users"
  egress:
    - action: Allow
```
:::note

 Deleting the ApplicationLayer CRD or disabling the ALP will prevent policy enforcement, but it will not affect existing network policies.
 However, any network policies that rely on HTTP match will remain in place but will no longer have any effect.

:::
